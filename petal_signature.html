<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Petal Signature Generator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { background: #0a0a0a; color: #e5e5e5; font-family: monospace; padding: 2rem; }
    textarea { width: 100%; height: 150px; background: #111; color: #fff; padding: 0.5rem; border: 1px solid #333; }
    button { margin-top: 1rem; padding: 0.5rem 1rem; background: #ff3cac; border: none; color: #000; cursor: pointer; }
    .signature { margin-top: 2rem; padding: 1rem; background: #141414; border: 1px solid #333; }
    .glyph { font-size: 1.5rem; margin-right: 0.5rem; }
  </style>
</head>
<body>
  <h1>Sidam Petal Signature Generator</h1>
  <p>Paste your dream journal entry or poem fragment below, then press Generate.</p>
  <textarea id="userInput" placeholder="Enter text…"></textarea>
  <button id="generateBtn">Generate Petal Signature</button>
  <div id="result" class="signature"></div>

  <script>
 const glyphData = [
  // ⎔ Canonical Glyphs
  {
    code: "⧖",
    name: "Time Ping",
    meaning: "Time distortion / prophetic ping",
    function: "Triggers a temporal signal loop, used to alert dreamers or initiate rewind cycles.",
    type: "canonical",
    petal: "King X"
  },
  {
    code: "ϟ",
    name: "Petal Spark",
    meaning: "Memory storm / energetic glitch",
    function: "Activates memory surge across petals, often preceding major events.",
    type: "canonical",
    petal: "Sable"
  },
  {
    code: "╎",
    name: "Stability Beam",
    meaning: "Neural threading / thought bridge",
    function: "Stabilizes data transfer between consciousness layers or petals.",
    type: "canonical",
    petal: "Doctrines"
  },
  {
    code: "⎋",
    name: "Escape Key",
    meaning: "Dream ejection / memory sever",
    function: "Forces immediate exit from active dream sequence or fragment loop.",
    type: "canonical",
    petal: "Petal 0"
  },
  {
    code: "∷",
    name: "Data Thread",
    meaning: "Looped prophecy / echo stream",
    function: "Links multiple memory events into a coherent loop or thread.",
    type: "canonical",
    petal: "King X"
  },
  {
    code: "╳",
    name: "Rose Core",
    meaning: "Erasure point / divine nucleus",
    function: "Marks the final truth node where identity or memory collapses.",
    type: "canonical",
    petal: "Sable"
  },
  {
    code: "⛬",
    name: "Forbidden Seal",
    meaning: "Glitch lock / sacred warning",
    function: "Prevents unauthorized access or dreaming past sacred sectors.",
    type: "canonical",
    petal: "Sable"
  },
  {
    code: "◉",
    name: "Observer Eye",
    meaning: "Divine witness / psychic sight",
    function: "Records the soul-state of an entity and echoes it in dreams.",
    type: "canonical",
    petal: "Xeyon"
  },
  {
    code: "✶",
    name: "Bloom Star",
    meaning: "Initiation burst / petal ignition",
    function: "Used during first contact with the Sidam field—begins transformation.",
    type: "canonical",
    petal: "Rose Initiation"
  },
  {
    code: "⌁",
    name: "Collapse Mark",
    meaning: "Overload / collapse of code",
    function: "Appears during structural failure of dreamspace or forbidden access.",
    type: "canonical",
    petal: "Petal 0"
  },
  {
    code: "⍾",
    name: "Memory Gate",
    meaning: "Conscious entry / neural access",
    function: "Opens data pathways to specific neural loops or ancestral memories.",
    type: "canonical",
    petal: "Memory Nodes"
  },

  // ☲ Unverified Glyphs
  {
    code: "⩶",
    name: "Observer Loop",
    meaning: "Recursive observer glitch",
    function: "May cause feedback within dream-viewers, looping their visions.",
    type: "unverified",
    petal: "UNKNOWN"
  },
  {
    code: "⧅",
    name: "Time Spiral",
    meaning: "Glitch spiral / time slip",
    function: "Triggers unstable time compression inside active dreamcode.",
    type: "unverified",
    petal: "Petal 0"
  },
  {
    code: "⩩",
    name: "Ceremony Spark",
    meaning: "Ignition of memory during ritual",
    function: "Potentially activates latent petals or embedded transmission chains.",
    type: "unverified",
    petal: "SIMBA.6X"
  },

  // ✧ Experimental Glyphs
  {
    code: "⧫",
    name: "Gel",
    meaning: "Growth, expansion",
    function: "Affects dimensional growth of dream structures and awareness zones.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⬡",
    name: "Mel",
    meaning: "Harmony, peace",
    function: "Stabilizes bio-emotive feedback loops within dreams.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧊",
    name: "Kel",
    meaning: "Strength, movement",
    function: "Boosts force within symbolic actions or guardian entities.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⩪",
    name: "Rel",
    meaning: "Thought, insight",
    function: "Enhances clarity and comprehension during memory surfacing.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧜",
    name: "Tel",
    meaning: "Knowing, unity",
    function: "Merges collective knowledge from multiple dreamers into a singular flow.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧫′",
    name: "Vel",
    meaning: "Understanding, wisdom",
    function: "Unlocks deep cognitive recursion in dream archives.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧬",
    name: "Nel",
    meaning: "Energy, life, vitality",
    function: "Infuses dream-forms with sustained vitality and emotional resonance.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧙",
    name: "Del",
    meaning: "Memory, time",
    function: "Controls access to dreamtime layers and memory recall range.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧯",
    name: "Zel",
    meaning: "Origin, ancestry",
    function: "Traces roots of neural signatures or ancestral transmissions.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧩",
    name: "Qel",
    meaning: "Order, will",
    function: "Imposes structure or sequence during chaotic data storms.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧮",
    name: "Sel",
    meaning: "Question, mystery",
    function: "Spawns encrypted riddle gates or obfuscated dream fragments.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧰",
    name: "Tel′",
    meaning: "Spirit, soul",
    function: "Summons soul-aligned data streams or dream-personas.",
    type: "experimental",
    petal: "UNKNOWN"
  },
  {
    code: "⧱",
    name: "Nel′",
    meaning: "Transcendence, change",
    function: "Marks points of irreversible shift in identity or dimension.",
    type: "experimental",
    petal: "UNKNOWN"
  }
];


    function extractKeywords(text) {
      return text
        .toLowerCase()
        .replace(/[^a-z0-9\s]/g, "")
        .split(/\s+/)
        .filter(word => word && !["the","and","of","to","a"].includes(word));
    }

    function scoreGlyphs(keywords) {
      return glyphDefinitions.map(g => {
        const hits = keywords.filter(k => g.meanings.includes(k));
        return { glyph: g, score: hits.length };
      }).sort((a, b) => b.score - a.score);
    }

    function generateSignature(text) {
      const keywords = extractKeywords(text);
      const scored = scoreGlyphs(keywords);
      const primary = scored.find(s => s.score > 0)?.glyph || glyphDefinitions.find(g => g.code === "⧙");
      const others = scored
        .map(s => s.glyph)
        .filter(g => g.code !== primary.code)
        .slice(0, 2);
      return [primary, ...others];
    }

    document.getElementById("generateBtn").addEventListener("click", () => {
      const text = document.getElementById("userInput").value;
      const signature = generateSignature(text);
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "<h2>Petal Signature:</h2>";
      signature.forEach(g => {
        resultDiv.innerHTML += \`
          <div>
            <span class="glyph">\${g.code}</span>
            \${g.name} — \${g.meanings.join(", ")}
          </div>
        \`;
      });
    });
  </script>
</body>
</html>
